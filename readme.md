# readme

MicroBlocks and Python Communication with Messages.

# Install

```bash
# Python3
python -m pip install microblocks_messaging_library
```

# Usage

[MicroBlocks demo](https://microblocksfun.cn/run/microblocks.html#project=projectName%20%27%27%0A%0Amodule%20main%0Aauthor%20unknown%0Aversion%201%200%20%0Adescription%20%27%27%0A%0Ascript%2066%20153%20%7B%0AwhenBroadcastReceived%20%27happy%27%0A%27%5Bdisplay%3AmbDisplay%5D%27%2015237440%0A%7D%0A%0Ascript%20283%20160%20%7B%0AwhenBroadcastReceived%20%27sad%27%0A%27%5Bdisplay%3AmbDisplay%5D%27%2018284864%0A%7D%0A%0Ascript%20238%20343%20%28%27MQTT%20event%20topic%27%20%27%27%29%0A%0Ascript%2060%20377%20%7B%0AwhenStarted%0Aforever%20%7B%0A%20%20waitMillis%203000%0A%20%20sendBroadcast%20%27hello%20world%27%0A%7D%0A%7D%0A%0A%0Amodule%20%27IR%20Remote%27%20Comm%0Aauthor%20MicroBlocks%0Aversion%201%205%20%0Atags%20ir%20infrared%20remote%20%0Adescription%20%27Sends%20and%20receives%20infrared%20remote%20control%20messages%20like%20the%20ones%20used%20for%20TV%20sets%20or%20air%20conditioners.%20Currently%20supports%20only%20the%20NEC%20protocol%2C%20which%20is%20quite%20common%20but%20not%20the%20only%20IR%20protocol%20in%20use.%20An%20NEC%20message%20consists%20of%20a%20one%20byte%20device%20number%20and%20a%20one%20byte%20command.%0A%0ANote%3A%20Transmitting%20IR%20does%20not%20work%20on%20ESP8266%20boards.%0A%0AReceiving%20requires%20an%20IR%20receiver%20module%2C%20such%20as%20those%20built%20into%20the%20Circuit%20Playground%20Express%20and%20ED1%20boards.%20Transmitting%20requires%20an%20IR%20transmitter%20LED%2C%20such%20as%20those%20built%20into%20the%20Circuit%20Playground%20Express%20and%20several%20M5%20Stack%20products.%20Inexpensive%20IR%20LED%20transmitter%20and%20receivers%20are%20available%20for%20use%20with%20other%20boards.%27%0Avariables%20_ir_pin%20_ir_pulse_times%20_ir_last_code%20_ir_last_device%20_ir_transmit_pin%20%0A%0A%20%20spec%20%27%20%27%20%27attachIR%27%20%27attach%20IR%20receiver%20to%20pin%20_%27%20%27num%27%200%0A%20%20spec%20%27r%27%20%27ir_code_received%27%20%27IR%20code%20received%3F%27%0A%20%20spec%20%27r%27%20%27ir_last_code%27%20%27IR%20code%27%0A%20%20space%0A%20%20spec%20%27%20%27%20%27IR_Transmit%27%20%27IR%20transmit%20device%20_%20command%20_%27%20%27num%20num%27%2048896%201%0A%20%20spec%20%27%20%27%20%27attachIRTransmitter%27%20%27attach%20IR%20transmitter%20to%20pin%20_%27%20%27num%27%200%0A%20%20space%0A%20%20spec%20%27r%27%20%27receiveIR%27%20%27receive%20IR%20code%27%0A%20%20space%0A%20%20spec%20%27%20%27%20%27_testIR%27%20%27_test%20IR%27%0A%20%20spec%20%27r%27%20%27_receiveIRFromDevice%27%20%27_receive%20IR%20code%20from%20device%20_%27%20%27num%27%2048896%0A%20%20space%0A%20%20spec%20%27%20%27%20%27_captureIRMessage%27%20%27_captureIRMessage%27%20%27any%27%0A%20%20spec%20%27%20%27%20%27_dumpIR%27%20%27_dumpIR%27%20%27any%27%0A%20%20spec%20%27r%27%20%27_getIRByte%27%20%27_getIRByte%20_%27%20%27auto%20any%27%204%0A%20%20spec%20%27r%27%20%27_got32Bits%27%20%27_got32Bits%27%20%27any%27%0A%20%20spec%20%27%20%27%20%27_IR_SendByte%27%20%27_IR_SendByte%20_%27%20%27auto%27%20%2710%27%0A%0Ato%20IR_Transmit%20device%20command%20%7B%0A%20%20if%20%28_ir_transmit_pin%20%3D%3D%200%29%20%7Bif%20%28or%20%28%28boardType%29%20%3D%3D%20%27CircuitPlayground%27%29%20%28%28boardType%29%20%3D%3D%20%27M5Atom-Matrix%27%29%29%20%7B%0A%20%20%20%20_ir_transmit_pin%20%3D%2012%0A%20%20%7D%20%28or%20%28%28boardType%29%20%3D%3D%20%27M5StickC%27%29%20%28%28boardType%29%20%3D%3D%20%27M5StickC%2B%27%29%29%20%7B%0A%20%20%20%20_ir_transmit_pin%20%3D%209%0A%20%20%7D%7D%0A%20%20comment%20%27Message%20start%20pulse%20and%20space%27%0A%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%2038000%0A%20%20waitMicros%209000%0A%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%200%0A%20%20waitMicros%204500%0A%20%20comment%20%27Send%20device%20and%20command%20and%20their%20inverses%27%0A%20%20%27_IR_SendByte%27%20%28device%20%26%20255%29%0A%20%20%27_IR_SendByte%27%20%28%28device%20%3E%3E%208%29%20%26%20255%29%0A%20%20%27_IR_SendByte%27%20command%0A%20%20%27_IR_SendByte%27%20%28%27~%27%20command%29%0A%20%20comment%20%27Send%20stop%20bit%27%0A%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%2038000%0A%20%20waitMicros%20562%0A%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%200%0A%20%20comment%20%27Turn%20off%20IR%20transmit%20LED%27%0A%20%20if%20%28or%20%28%28boardType%29%20%3D%3D%20%27M5StickC%27%29%20%28%28boardType%29%20%3D%3D%20%27M5StickC%2B%27%29%29%20%7B%0A%20%20%20%20comment%20%27IR%20pin%20is%20inverted%20so%20true%20means%20%22off%22%27%0A%20%20%20%20digitalWriteOp%20_ir_transmit_pin%20true%0A%20%20%7D%20else%20%7B%0A%20%20%20%20digitalWriteOp%20_ir_transmit_pin%20false%0A%20%20%7D%0A%7D%0A%0Ato%20%27_IR_SendByte%27%20byte%20%7B%0A%20%20local%20%27bit%27%201%0A%20%20repeat%208%20%7B%0A%20%20%20%20if%20%280%20%3D%3D%20%28byte%20%26%20bit%29%29%20%7B%0A%20%20%20%20%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%2038000%0A%20%20%20%20%20%20waitMicros%20530%0A%20%20%20%20%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%200%0A%20%20%20%20%20%20waitMicros%20530%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%2038000%0A%20%20%20%20%20%20waitMicros%20530%0A%20%20%20%20%20%20%27%5Bio%3AplayTone%5D%27%20_ir_transmit_pin%200%0A%20%20%20%20%20%20waitMicros%201630%0A%20%20%20%20%7D%0A%20%20%20%20bit%20%3D%20%28bit%20%3C%3C%201%29%0A%20%20%7D%0A%7D%0A%0Ato%20%27_captureIRMessage%27%20%7B%0A%20%20if%20%28_ir_pulse_times%20%3D%3D%200%29%20%7B%0A%20%20%20%20_ir_pulse_times%20%3D%20%28newList%20200%29%0A%20%20%20%20if%20%28_ir_pin%20%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20if%20%28%28boardType%29%20%3D%3D%20%27CircuitPlayground%27%29%20%7B%0A%20%20%20%20%20%20%20%20_ir_pin%20%3D%2011%0A%20%20%20%20%20%20%7D%20%28%28boardType%29%20%3D%3D%20%27Citilab%20ED1%27%29%20%7B%0A%20%20%20%20%20%20%20%20_ir_pin%20%3D%2035%0A%20%20%20%20%20%20%7D%20%28%28boardType%29%20%3D%3D%20%27D1-Mini%27%29%20%7B%0A%20%20%20%20%20%20%20%20_ir_pin%20%3D%202%0A%20%20%20%20%20%20%7D%20%28%28boardType%29%20%3D%3D%20%27MakerPort%27%29%20%7B%0A%20%20%20%20%20%20%20%20_ir_pin%20%3D%2018%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20fillList%20_ir_pulse_times%200%0A%20%20local%20%27i%27%201%0A%20%20comment%20%27Wait%20for%20IR%20signal%20--%20this%20is%20the%20start%20of%20a%20new%20message.%0ANote%3A%20THe%20pin%20goes%20low%20when%20an%20IR%20signal%20is%20detected.%27%0A%20%20waitUntil%20%28not%20%28digitalReadOp%20_ir_pin%29%29%0A%20%20local%20%27start%27%20%28microsOp%29%0A%20%20forever%20%7B%0A%20%20%20%20comment%20%27Record%20the%20time%20until%20the%20end%20of%20the%20current%20IR%20pulse%20%28%22mark%22%29%27%0A%20%20%20%20waitUntil%20%28digitalReadOp%20_ir_pin%29%0A%20%20%20%20local%20%27end%27%20%28microsOp%29%0A%20%20%20%20atPut%20i%20_ir_pulse_times%20%28end%20-%20start%29%0A%20%20%20%20i%20%2B%3D%201%0A%20%20%20%20start%20%3D%20end%0A%20%20%20%20comment%20%27Record%20time%20until%20the%20start%20of%20the%20next%20IR%20pulse%20%28%22space%22%29%27%0A%20%20%20%20repeatUntil%20%28not%20%28digitalReadOp%20_ir_pin%29%29%20%7B%0A%20%20%20%20%20%20if%20%28%28%28microsOp%29%20-%20start%29%20%3E%205000%29%20%7B%0A%20%20%20%20%20%20%20%20comment%20%27No%20IR%20pulse%20for%205000%20usecs%20means%20%22end%20of%20message%22%27%0A%20%20%20%20%20%20%20%20return%200%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20local%20%27end%27%20%28microsOp%29%0A%20%20%20%20atPut%20i%20_ir_pulse_times%20%28end%20-%20start%29%0A%20%20%20%20i%20%2B%3D%201%0A%20%20%20%20start%20%3D%20end%0A%20%20%7D%0A%7D%0A%0Ato%20%27_dumpIR%27%20%7B%0A%20%20comment%20%27Print%20raw%20pulse%20timings%20to%20the%20terminal.%0ACan%20be%20used%20to%20analyze%20new%20protocols.%27%0A%20%20local%20%27i%27%201%0A%20%20printIt%20%27-----%27%0A%20%20repeat%20%28size%20_ir_pulse_times%29%20%7B%0A%20%20%20%20local%20%27mark%20usecs%27%20%28at%20i%20_ir_pulse_times%29%0A%20%20%20%20local%20%27space%20usecs%27%20%28at%20%28i%20%2B%201%29%20_ir_pulse_times%29%0A%20%20%20%20printIt%20%28v%20%27mark%20usecs%27%29%20%28v%20%27space%20usecs%27%29%0A%20%20%20%20i%20%2B%3D%202%0A%20%20%20%20if%20%28%28v%20%27space%20usecs%27%29%20%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20printIt%20%27timing%20entries%3A%27%20%28i%20-%202%29%0A%20%20%20%20%20%20return%200%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0Ato%20%27_getIRByte%27%20position%20%7B%0A%20%20local%20%27result%27%200%0A%20%20local%20%27i%27%20position%0A%20%20local%20%27bit%27%201%0A%20%20repeat%208%20%7B%0A%20%20%20%20if%20%28%28at%20i%20_ir_pulse_times%29%20%3E%201000%29%20%7Bresult%20%3D%20%28result%20%7C%20bit%29%7D%0A%20%20%20%20bit%20%3D%20%28bit%20%3C%3C%201%29%0A%20%20%20%20i%20%2B%3D%202%0A%20%20%7D%0A%20%20return%20result%0A%7D%0A%0Ato%20%27_got32Bits%27%20%7B%0A%20%20return%20%28and%20%28%28at%2067%20_ir_pulse_times%29%20%21%3D%200%29%20%28%28at%2068%20_ir_pulse_times%29%20%3D%3D%200%29%29%0A%7D%0A%0Ato%20%27_receiveIRFromDevice%27%20deviceID%20%7B%0A%20%20forever%20%7B%0A%20%20%20%20%27_captureIRMessage%27%0A%20%20%20%20if%20%28%27_got32Bits%27%29%20%7B%0A%20%20%20%20%20%20local%20%27id_lowByte%27%20%28%27_getIRByte%27%204%20nil%29%0A%20%20%20%20%20%20local%20%27id_highByte%27%20%28%27_getIRByte%27%2020%20nil%29%0A%20%20%20%20%20%20if%20%28and%20%28id_highByte%20%3D%3D%20%28deviceID%20%3E%3E%208%29%29%20%28id_lowByte%20%3D%3D%20%28deviceID%20%26%20255%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%28%27_getIRByte%27%2036%20nil%29%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0Ato%20%27_testIR%27%20%7B%0A%20%20forever%20%7B%0A%20%20%20%20%27_captureIRMessage%27%0A%20%20%20%20if%20%28%27_got32Bits%27%29%20%7B%0A%20%20%20%20%20%20comment%20%27Four%20byte%20message%20format%3A%0A%3Cdevice%20low%20byte%3E%3Cdevice%20high%20byte%3E%3Ccommand%3E%3Ccommand%2C%20bit-inverted%3E%27%0A%20%20%20%20%20%20local%20%27b1%27%20%28%27_getIRByte%27%204%20nil%29%0A%20%20%20%20%20%20local%20%27b2%27%20%28%27_getIRByte%27%2020%20nil%29%0A%20%20%20%20%20%20local%20%27b3%27%20%28%27_getIRByte%27%2036%20nil%29%0A%20%20%20%20%20%20local%20%27b4%27%20%28%27_getIRByte%27%2052%20nil%29%0A%20%20%20%20%20%20sayIt%20%27Device%3A%27%20%28%28b2%20%3C%3C%208%29%20%7C%20b1%29%20%27code%3A%27%20b3%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0Ato%20attachIR%20pin%20%7B%0A%20%20_ir_pin%20%3D%20pin%0A%7D%0A%0Ato%20attachIRTransmitter%20pin%20%7B%0A%20%20_ir_transmit_pin%20%3D%20pin%0A%7D%0A%0Ato%20ir_code_received%20%7B%0A%20%20return%20%28%28receiveIR%29%20%3E%3D%200%29%0A%7D%0A%0Ato%20ir_last_code%20%7B%0A%20%20return%20_ir_last_code%0A%7D%0A%0Ato%20receiveIR%20%7B%0A%20%20forever%20%7B%0A%20%20%20%20%27_captureIRMessage%27%0A%20%20%20%20if%20%28%27_got32Bits%27%29%20%7B%0A%20%20%20%20%20%20local%20%27id_lowByte%27%20%28%27_getIRByte%27%204%20nil%29%0A%20%20%20%20%20%20local%20%27id_highByte%27%20%28%27_getIRByte%27%2020%20nil%29%0A%20%20%20%20%20%20_ir_last_device%20%3D%20%28%28id_highByte%20%3C%3C%208%29%20%7C%20id_lowByte%29%0A%20%20%20%20%20%20_ir_last_code%20%3D%20%28%27_getIRByte%27%2036%20nil%29%0A%20%20%20%20%20%20atPut%20%27all%27%20_ir_pulse_times%200%0A%20%20%20%20%20%20return%20_ir_last_code%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%0Amodule%20%27LED%20Display%27%20Output%0Aauthor%20MicroBlocks%0Aversion%201%205%20%0Atags%20pixel%20matrix%20led%20tft%20%0Adescription%20%27Display%20primitives%20for%20the%205x5%20LED%20display%20on%20the%20BBC%20micro%3Abit%2C%20Calliope%20mini%20and%20M5Atom%20Matrix.%20Boards%20with%20TFT%20displays%20%28such%20as%20the%20Citilab%20ED1%20or%20the%20M5Stack%20family%29%20support%20these%20primitives%20with%20a%20simulated%20%22fat%20pixel%22%20display.%27%0Avariables%20_stop_scrolling_text%20%0A%0A%20%20spec%20%27%20%27%20%27%5Bdisplay%3AmbDisplay%5D%27%20%27display%20_%27%20%27microbitDisplay%27%2015237440%0A%20%20spec%20%27%20%27%20%27_set%20display%20color%27%20%27set%20display%20color%20_%27%20%27color%27%0A%20%20spec%20%27%20%27%20%27%5Bdisplay%3AmbDisplayOff%5D%27%20%27clear%20display%27%0A%20%20space%0A%20%20spec%20%27%20%27%20%27%5Bdisplay%3AmbPlot%5D%27%20%27plot%20x%20_%20y%20_%27%20%27num%20num%27%203%203%0A%20%20spec%20%27%20%27%20%27%5Bdisplay%3AmbUnplot%5D%27%20%27unplot%20x%20_%20y%20_%27%20%27num%20num%27%203%203%0A%20%20space%0A%20%20spec%20%27%20%27%20%27displayCharacter%27%20%27display%20character%20_%27%20%27str%27%20%27A%27%0A%20%20spec%20%27%20%27%20%27scroll_text%27%20%27scroll%20text%20_%20%3A%20pausing%20_%20ms%27%20%27str%20num%27%20%27HELLO%20ROSA%21%27%20100%0A%20%20spec%20%27%20%27%20%27stopScrollingText%27%20%27stop%20scrolling%27%0A%0Ato%20%27_set%20display%20color%27%20color%20%7B%0A%20%20callCustomCommand%20%27%5Bdisplay%3AmbSetColor%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20color%29%0A%7D%0A%0Ato%20displayCharacter%20s%20%7B%0A%20%20s%20%3D%20%28%27%5Bdata%3Ajoin%5D%27%20%27%27%20s%29%0A%20%20if%20%28%28size%20s%29%20%3D%3D%200%29%20%7B%0A%20%20%20%20%27%5Bdisplay%3AmbDisplayOff%5D%27%0A%20%20%20%20return%200%0A%20%20%7D%0A%20%20%27%5Bdisplay%3AmbDrawShape%5D%27%20%28%27%5Bdisplay%3AmbShapeForLetter%5D%27%20%28at%201%20s%29%29%0A%7D%0A%0Ato%20scroll_text%20text%20optionalDelay%20%7B%0A%20%20text%20%3D%20%28%27%5Bdata%3Ajoin%5D%27%20%27%27%20text%29%0A%20%20local%20%27delay%27%20100%0A%20%20if%20%28%28pushArgCount%29%20%3E%201%29%20%7B%0A%20%20%20%20delay%20%3D%20optionalDelay%0A%20%20%7D%0A%20%20_stop_scrolling_text%20%3D%20%28booleanConstant%20false%29%0A%20%20if%20%28%27Pico%3Aed%27%20%3D%3D%20%28boardType%29%29%20%7B%0A%20%20%20%20for%20position%20%28%28%28size%20text%29%20%2A%206%29%20%2B%2018%29%20%7B%0A%20%20%20%20%20%20if%20_stop_scrolling_text%20%7Breturn%200%7D%0A%20%20%20%20%20%20%27%5Bdisplay%3AmbDisplayOff%5D%27%0A%20%20%20%20%20%20%27%5Btft%3Atext%5D%27%20text%20%2817%20-%20position%29%200%20%28colorSwatch%20125%20125%20125%20255%29%201%20true%0A%20%20%20%20%20%20waitMillis%20%28delay%20%2F%202%29%0A%20%20%20%20%7D%0A%20%20%7D%20else%20%7B%0A%20%20%20%20for%20position%20%28%28%28size%20text%29%20%2A%206%29%20%2B%206%29%20%7B%0A%20%20%20%20%20%20if%20_stop_scrolling_text%20%7Breturn%200%7D%0A%20%20%20%20%20%20for%20i%20%28size%20text%29%20%7B%0A%20%20%20%20%20%20%20%20%27%5Bdisplay%3AmbDrawShape%5D%27%20%28%27%5Bdisplay%3AmbShapeForLetter%5D%27%20%28%27%5Bdata%3AunicodeAt%5D%27%20i%20text%29%29%20%28%28%28i%20%2A%206%29%20%2B%202%29%20-%20position%29%201%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20waitMillis%20delay%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0Ato%20stopScrollingText%20%7B%0A%20%20_stop_scrolling_text%20%3D%20%28booleanConstant%20true%29%0A%20%20waitMillis%2010%0A%20%20%27%5Bdisplay%3AmbDisplayOff%5D%27%0A%7D%0A%0A%0Amodule%20MQTT%20Comm%0Aauthor%20wwj718%0Aversion%201%206%20%0Adepends%20WiFi%20%0Atags%20mqtt%20network%20%0Adescription%20%27A%20simple%20MQTT%20client.%0A%27%0A%0A%20%20spec%20%27%20%27%20%27MQTT%20connect%20to%27%20%27MQTT%20connect%20to%20broker%20_%20%3A%20buffer%20sizes%20_%20client%20id%20_%20%3A%20username%20_%20password%20_%27%20%27str%20num%20str%20str%20str%27%20%27%27%20128%20%27%27%20%27%27%20%27%27%0A%20%20spec%20%27r%27%20%27MQTT%20connected%27%20%27MQTT%20connected%27%0A%20%20spec%20%27%20%27%20%27MQTT%20disconnect%27%20%27MQTT%20disconnect%27%0A%20%20spec%20%27%20%27%20%27MQTT%20sub%27%20%27MQTT%20sub%20_%20%3A%20QoS%20_%27%20%27str%20num%27%20%27testTopic%27%200%0A%20%20spec%20%27%20%27%20%27MQTT%20unsub%27%20%27MQTT%20unsub%20_%27%20%27str%27%20%27testTopic%27%0A%20%20spec%20%27%20%27%20%27MQTT%20pub%27%20%27MQTT%20pub%20topic%20_%20payload%20_%20%3A%20retain%20_%20QoS%20_%27%20%27str%20auto%20bool%20num%27%20%27testTopic%27%20%27Hello%21%27%20false%200%0A%20%20spec%20%27r%27%20%27%5Bnet%3AMQTTLastEvent%5D%27%20%27MQTT%20event%20%3A%20binary%20_%27%20%27bool%27%20false%0A%20%20spec%20%27r%27%20%27MQTT%20event%20topic%27%20%27topic%20for%20MQTT%20event%20_%27%20%27str%27%20%27%27%0A%20%20spec%20%27r%27%20%27MQTT%20event%20payload%27%20%27payload%20for%20MQTT%20event%20_%27%20%27str%27%20%27%27%0A%20%20spec%20%27%20%27%20%27_MQTT%20set%20will%27%20%27MQTT%20set%20will%20topic%20_%20payload%20_%20%3A%20retain%20_%20QoS%20_%20%3A%20buffer%20sizes%20_%27%20%27str%20auto%20bool%20num%20num%27%20%27testWill%27%20%27Last%20will%21%27%20false%200%20128%0A%0Ato%20%27MQTT%20connect%20to%27%20broker%20buffer_sizes%20client_id%20username%20password%20%7B%0A%20%20if%20%28%28getIPAddress%29%20%21%3D%20%270.0.0.0%27%29%20%7B%0A%20%20%20%20if%20%28%28pushArgCount%29%20%3D%3D%201%29%20%7B%0A%20%20%20%20%20%20callCustomCommand%20%27%5Bnet%3AMQTTConnect%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20broker%20128%20%28%27%5Bnet%3AmyMAC%5D%27%29%29%0A%20%20%20%20%7D%20%28%28pushArgCount%29%20%3D%3D%203%29%20%7B%0A%20%20%20%20%20%20callCustomCommand%20%27%5Bnet%3AMQTTConnect%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20broker%20buffer_sizes%20client_id%29%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20callCustomCommand%20%27%5Bnet%3AMQTTConnect%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20broker%20buffer_sizes%20client_id%20username%20password%29%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28%27MQTT%20connected%27%29%20%7B%0A%20%20%20%20%20%20sayIt%20%27Connected%21%27%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20sayIt%20%27Not%20Connected%27%0A%20%20%20%20%7D%0A%20%20%7D%20else%20%7B%0A%20%20%20%20sayIt%20%27Not%20Connected%27%0A%20%20%7D%0A%7D%0A%0Ato%20%27MQTT%20connected%27%20%7B%0A%20%20return%20%28callCustomReporter%20%27%5Bnet%3AMQTTIsConnected%5D%27%29%0A%7D%0A%0Ato%20%27MQTT%20disconnect%27%20%7B%0A%20%20callCustomCommand%20%27%5Bnet%3AMQTTdisconnect%5D%27%0A%7D%0A%0Ato%20%27MQTT%20event%20payload%27%20event%20%7B%0A%20%20if%20%28and%20%28isType%20event%20%27list%27%29%20%28%28size%20event%29%20%3E%201%29%29%20%7B%0A%20%20%20%20comment%20%27Join%20to%20empty%20string%20converts%20byte%20array%20to%20string%27%0A%20%20%20%20return%20%28%27%5Bdata%3Ajoin%5D%27%20%27%27%20%28at%202%20event%29%29%0A%20%20%7D%20else%20%7B%0A%20%20%20%20return%20%27%27%0A%20%20%7D%0A%7D%0A%0Ato%20%27MQTT%20event%20topic%27%20event%20%7B%0A%20%20if%20%28and%20%28isType%20event%20%27list%27%29%20%28%28size%20event%29%20%3E%201%29%29%20%7B%0A%20%20%20%20return%20%28at%201%20event%29%0A%20%20%7D%20else%20%7B%0A%20%20%20%20return%20%27%27%0A%20%20%7D%0A%7D%0A%0Ato%20%27MQTT%20pub%27%20topic%20payload%20retain%20qos%20%7B%0A%20%20if%20%28%28pushArgCount%29%20%3C%204%29%20%7B%0A%20%20%20%20okay%20%3D%20%28callCustomReporter%20%27%5Bnet%3AMQTTPub%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%20payload%29%29%0A%20%20%7D%20else%20%7B%0A%20%20%20%20okay%20%3D%20%28callCustomReporter%20%27%5Bnet%3AMQTTPub%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%20payload%20retain%20qos%29%29%0A%20%20%7D%0A%20%20if%20%28not%20okay%29%20%7B%0A%20%20%20%20sayIt%20%27pub%20failure%21%27%0A%20%20%7D%0A%7D%0A%0Ato%20%27MQTT%20sub%27%20topic%20qos%20%7B%0A%20%20if%20%28%28pushArgCount%29%20%3C%202%29%20%7B%0A%20%20%20%20okay%20%3D%20%28callCustomReporter%20%27%5Bnet%3AMQTTSub%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%29%29%0A%20%20%7D%20else%20%7B%0A%20%20%20%20okay%20%3D%20%28callCustomReporter%20%27%5Bnet%3AMQTTSub%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%20qos%29%29%0A%20%20%7D%0A%20%20if%20%28not%20okay%29%20%7B%0A%20%20%20%20sayIt%20%27sub%20failure%21%27%0A%20%20%7D%0A%7D%0A%0Ato%20%27MQTT%20unsub%27%20topic%20%7B%0A%20%20if%20%28%28callCustomReporter%20%27%5Bnet%3AMQTTUnsub%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%29%29%20%21%3D%20%28booleanConstant%20true%29%29%20%7BsayIt%20%27unsub%20failure%21%27%7D%0A%7D%0A%0Ato%20%27_MQTT%20set%20will%27%20topic%20payload%20retain%20qos%20buffer_sizes%20%7B%0A%20%20if%20%28%27MQTT%20connected%27%29%20%7B%0A%20%20%20%20sayIt%20%27set%20will%20has%20to%20be%20called%20before%20calling%20connect%27%0A%20%20%20%20return%20%27%27%0A%20%20%7D%0A%20%20if%20%28%28pushArgCount%29%20%3C%204%29%20%7B%0A%20%20%20%20okay%20%3D%20%28callCustomReporter%20%27%5Bnet%3AMQTTSetWill%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%20payload%29%29%0A%20%20%7D%20%28%28pushArgCount%29%20%3D%3D%204%29%20%7B%0A%20%20%20%20okay%20%3D%20%28callCustomReporter%20%27%5Bnet%3AMQTTSetWill%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%20payload%20retain%20qos%29%29%0A%20%20%7D%20else%20%7B%0A%20%20%20%20okay%20%3D%20%28callCustomReporter%20%27%5Bnet%3AMQTTSetWill%5D%27%20%28%27%5Bdata%3AmakeList%5D%27%20topic%20payload%20retain%20qos%20buffer_sizes%29%29%0A%20%20%7D%0A%20%20if%20%28not%20okay%29%20%7B%0A%20%20%20%20sayIt%20%27set%20will%20failure%21%27%0A%20%20%7D%0A%7D%0A%0A%0Amodule%20Maqueen%20Output%0Aauthor%20%27Turgut%20Guneysu%27%0Aversion%201%202%20%0Adepends%20%27IR%20Remote%27%20%0Achoices%20LRBMenu%20left%20right%20both%20%0Achoices%20DirMenu%20fwd%20bwd%20%0Achoices%20PosMenu%20left%20right%20%0Adescription%20%27DFRobot%20Maqueen%20Car%20Kit%20Library%0ASupports%3A%0A%20%20micro%3Abit%20v1%20and%20v2%0A%20%202%20x%20N20%20Motors%20%28133rpm%29%0A%20%202%20x%20LEDs%0A%20%202%20x%20Servos%20%28use%20Servo%20Lib%29%0A%20%202%20x%20Line%20Sensors%0A%20%202%20x%20Extension%20Ports%0A%20%204%20x%20RGB%20LEDs%20%28use%20NEOPixel%20Lib%29%0A%20%20HC-SR04%20Distance%20Sensor%0A%20%20Buzzer%0A%20%20IR%20receiver%20%28NEC%29%0A%20%20I2C%20Connector%0A%20%203.5-5V%20Battery%20Connector%0APin%20assignments%3A%0A%20%20Buzzer%20%3D%200%0A%20%20Trigger%20%3D%201%0A%20%20Echo%20%3D%202%0A%20%20Servo1%20%3D%201%0A%20%20Servo2%20%3D%202%0A%20%20LED_Left%20%3D%208%0A%20%20LED_Right%20%3D%2012%0A%20%20Line_Left%20%3D%2013%0A%20%20Line_Right%20%3D%2014%0A%20%20NeoPixels%20%3D%2015%0A%20%20IR%20Receiver%20%3D%2016%0ANote%3A%20HC-SR04%20and%20SERVOs%20share%20pins%201%20and%202.%0A%27%0A%0A%20%20spec%20%27%20%27%20%27Maqueen%20motor%27%20%27Maqueen%20motor%20_%20dir%20_%20speed%280-255%29%20_%27%20%27menu.LRBMenu%20menu.DirMenu%20auto%27%20%27both%27%20%27fwd%27%20128%0A%20%20spec%20%27%20%27%20%27Maqueen%20stop%20motors%27%20%27Maqueen%20stop%20motors%20_%27%20%27menu.LRBMenu%27%20%27both%27%0A%20%20space%0A%20%20spec%20%27%20%27%20%27Maqueen%20LED%27%20%27Maqueen%20LED%20_%20_%27%20%27menu.LRBMenu%20bool%27%20%27left%27%20true%0A%20%20spec%20%27%20%27%20%27Maqueen%20beep%27%20%27Maqueen%20beep%20_%20ms%27%20%27auto%27%20100%0A%20%20space%0A%20%20spec%20%27r%27%20%27Maqueen%20line%20sensor%27%20%27Maqueen%20line%20sensor%20_%27%20%27menu.PosMenu%27%20%27left%27%0A%20%20spec%20%27r%27%20%27Maqueen%20sees%20line%20on%20left%27%20%27Maqueen%20sees%20line%20on%20left%20_%20right%20_%27%20%27bool%20bool%27%20true%20true%0A%20%20space%0A%20%20spec%20%27r%27%20%27Maqueen%20distance%20%28cm%29%27%20%27Maqueen%20distance%20%28cm%29%27%0A%20%20spec%20%27r%27%20%27Maqueen%20IR%20keycode%27%20%27Maqueen%20IR%20keycode%27%0A%0Ato%20%27Maqueen%20IR%20keycode%27%20%7B%0A%20%20comment%20%27Wait%20for%20an%20IR%20message%20and%20return%20the%20key%20code.%27%0A%20%20attachIR%2016%0A%20%20return%20%28receiveIR%29%0A%7D%0A%0Ato%20%27Maqueen%20LED%27%20lrb%20LEDstatus%20%7B%0A%20%20comment%20%272%20x%20red%20LEDs%27%0A%20%20local%20%27_mq_pin_LED_Left%27%208%0A%20%20local%20%27_mq_pin_LED_Right%27%2012%0A%20%20if%20%28lrb%20%3D%3D%20%27left%27%29%20%7B%0A%20%20%20%20digitalWriteOp%20_mq_pin_LED_Left%20LEDstatus%0A%20%20%7D%20%28lrb%20%3D%3D%20%27right%27%29%20%7B%0A%20%20%20%20digitalWriteOp%20_mq_pin_LED_Right%20LEDstatus%0A%20%20%7D%20%28lrb%20%3D%3D%20%27both%27%29%20%7B%0A%20%20%20%20digitalWriteOp%20_mq_pin_LED_Left%20LEDstatus%0A%20%20%20%20digitalWriteOp%20_mq_pin_LED_Right%20LEDstatus%0A%20%20%7D%0A%7D%0A%0Ato%20%27Maqueen%20beep%27%20duration%20%7B%0A%20%20comment%20%27Buzzer%0ARemember%20to%20set%20the%20P0%20switch.%27%0A%20%20local%20%27_mq_pin_Buzzer%27%200%0A%20%20local%20%27end%20time%27%20%28%28millisOp%29%20%2B%20duration%29%0A%20%20repeatUntil%20%28%28millisOp%29%20%3E%3D%20%28v%20%27end%20time%27%29%29%20%7B%0A%20%20%20%20digitalWriteOp%20_mq_pin_Buzzer%20true%0A%20%20%20%20waitMicros%201900%0A%20%20%20%20digitalWriteOp%20_mq_pin_Buzzer%20false%0A%20%20%20%20waitMicros%201900%0A%20%20%7D%0A%7D%0A%0Ato%20%27Maqueen%20distance%20%28cm%29%27%20%7B%0A%20%20comment%20%27HC-SR04%20Distance%20Sensor%0AContributed%20by%20Joan%20Guill%C3%A9n%20and%20Josep%20Ferr%C3%A0ndiz%27%0A%20%20local%20%27_mq_pin_Trigger%27%201%0A%20%20local%20%27_mq_pin_Echo%27%202%0A%20%20digitalWriteOp%20_mq_pin_Trigger%20false%0A%20%20waitMicros%202%0A%20%20digitalWriteOp%20_mq_pin_Trigger%20true%0A%20%20waitMicros%2050%0A%20%20digitalWriteOp%20_mq_pin_Trigger%20false%0A%20%20local%20%27start%27%20%28microsOp%29%0A%20%20waitUntil%20%28or%20%28not%20%28digitalReadOp%20_mq_pin_Echo%29%29%20%28%28%28microsOp%29%20-%20start%29%20%3E%2023320%29%29%0A%20%20waitUntil%20%28or%20%28digitalReadOp%20_mq_pin_Echo%29%20%28%28%28microsOp%29%20-%20start%29%20%3E%2023320%29%29%0A%20%20local%20%27init%27%20%28microsOp%29%0A%20%20waitUntil%20%28or%20%28not%20%28digitalReadOp%20_mq_pin_Echo%29%29%20%28%28%28microsOp%29%20-%20init%29%20%3E%2023320%29%29%0A%20%20local%20%27end%27%20%28microsOp%29%0A%20%20waitMillis%2010%0A%20%20return%20%28%2810%20%2A%20%28end%20-%20init%29%29%20%2F%20583%29%0A%7D%0A%0Ato%20%27Maqueen%20line%20sensor%27%20lr%20%7B%0A%20%20comment%20%272%20x%20Line%20Sensors%20%28true%2Ffalse%29%0AWhen%20Maqueen%E2%80%99s%20line-tracking%20sensor%20is%20put%20on%20the%20black%20line%2C%0Athe%20sensor%20outputs%200%2C%20and%20the%20blue%20LED%20turns%20off%3B%0Aif%20put%20on%20white%20area%2C%20it%20outputs%201%20and%20the%20blue%20LED%20turns%20on.%27%0A%20%20local%20%27_mq_pin_Line_Left%27%2013%0A%20%20local%20%27_mq_pin_Line_Right%27%2014%0A%20%20if%20%28lr%20%3D%3D%20%27left%27%29%20%7B%0A%20%20%20%20return%20%28digitalReadOp%20_mq_pin_Line_Left%29%0A%20%20%7D%20%28lr%20%3D%3D%20%27right%27%29%20%7B%0A%20%20%20%20return%20%28digitalReadOp%20_mq_pin_Line_Right%29%0A%20%20%7D%0A%7D%0A%0Ato%20%27Maqueen%20motor%27%20lrb%20dir%20speed%20%7B%0A%20%20comment%20%27MOTOR%20CONTROL%3A%0A%0A%2F%2F%25%20blockId%3D%22left%20motor%22%20block%3D%22left%22%20M1%20%3D%200%2C%0A%2F%2F%25%20blockId%3D%22right%20motor%22%20block%3D%22right%22%20M2%20%3D%201%2C%0A%2F%2F%25%20blockId%3D%22all%20motor%22%20block%3D%22all%22%20All%20%20%28issue%202%20cmds%2C%20one%20for%20each%20motor%29%0A%0A%2F%2F%25%20blockId%3D%22CW%22%20block%3D%22Forward%22%20CW%20%3D%200x0%2C%0A%2F%2F%25%20blockId%3D%22CCW%22%20block%3D%22Backward%22%20CCW%20%3D%200x1%0A%0A%2F%2F%25%20blockId%3Dmotor_MotorRun%20block%3D%22motor%7C%25index%7Cmove%7C%25Dir%7Cat%20speed%7C%25speed%22%0A%2F%2F%25%20speed.min%3D0%20speed.max%3D255%27%0A%20%20local%20%27_mq_i2c_addr%27%20%28hexToInt%20%2710%27%29%0A%20%20speed%20%3D%20%28minimum%20255%20speed%29%0A%20%20if%20%28dir%20%3D%3D%20%27fwd%27%29%20%7B%0A%20%20%20%20dir%20%3D%200%0A%20%20%7D%20%28dir%20%3D%3D%20%27bwd%27%29%20%7B%0A%20%20%20%20dir%20%3D%201%0A%20%20%7D%0A%20%20if%20%28lrb%20%3D%3D%20%27left%27%29%20%7B%0A%20%20%20%20lrb%20%3D%200%0A%20%20%20%20%27%5Bsensors%3Ai2cWrite%5D%27%20_mq_i2c_addr%20%28%27%5Bdata%3AmakeList%5D%27%20lrb%20dir%20speed%29%0A%20%20%7D%20%28lrb%20%3D%3D%20%27right%27%29%20%7B%0A%20%20%20%20lrb%20%3D%202%0A%20%20%20%20%27%5Bsensors%3Ai2cWrite%5D%27%20_mq_i2c_addr%20%28%27%5Bdata%3AmakeList%5D%27%20lrb%20dir%20speed%29%0A%20%20%7D%20%28lrb%20%3D%3D%20%27both%27%29%20%7B%0A%20%20%20%20%27%5Bsensors%3Ai2cWrite%5D%27%20_mq_i2c_addr%20%28%27%5Bdata%3AmakeList%5D%27%200%20dir%20speed%29%0A%20%20%20%20waitMillis%201%0A%20%20%20%20%27%5Bsensors%3Ai2cWrite%5D%27%20_mq_i2c_addr%20%28%27%5Bdata%3AmakeList%5D%27%202%20dir%20speed%29%0A%20%20%7D%0A%20%20waitMillis%2050%0A%7D%0A%0Ato%20%27Maqueen%20sees%20line%20on%20left%27%20leftSide%20rightSide%20%7B%0A%20%20comment%20%27Allows%20for%20dual%20evaluation%20of%20the%20sensors%20for%20faster%20results%20%27%0A%20%20return%20%28and%20%28leftSide%20%3D%3D%20%28not%20%28%27Maqueen%20line%20sensor%27%20%27left%27%29%29%29%20%28rightSide%20%3D%3D%20%28not%20%28%27Maqueen%20line%20sensor%27%20%27right%27%29%29%29%29%0A%7D%0A%0Ato%20%27Maqueen%20stop%20motors%27%20lrb%20%7B%0A%20%20comment%20%27STOP%20Motors%27%0A%20%20%27Maqueen%20motor%27%20lrb%20%27fwd%27%200%0A%7D%0A%0A%0Amodule%20WiFi%20Comm%0Aauthor%20MicroBlocks%0Aversion%201%206%20%0Atags%20communication%20network%20%0Adescription%20%27Connect%20to%20a%20WiFi%20network.%20Used%20in%20conjunction%20with%20other%20network%20libraries%2C%20such%20as%20HTTP%20client%2C%20HTTP%20server%20or%20Web%20Thing.%0A%27%0A%0A%20%20spec%20%27%20%27%20%27wifiConnect%27%20%27wifi%20connect%20to%20_%20password%20_%20%3A%20IP%20_%20gateway%20_%20subnet%20_%27%20%27str%20str%20auto%20auto%20auto%27%20%27Network_Name%27%20%27%27%20%27192.168.1.42%27%20%27192.168.1.1%27%20%27255.255.255.0%27%0A%20%20spec%20%27%20%27%20%27wifiCreateHotspot%27%20%27wifi%20create%20hotspot%20_%20password%20_%27%20%27str%20str%27%20%27Network_Name%27%20%27Network_Password%27%0A%20%20spec%20%27r%27%20%27getIPAddress%27%20%27IP%20address%27%0A%20%20spec%20%27r%27%20%27%5Bnet%3AmyMAC%5D%27%20%27MAC%20address%27%0A%0Ato%20getIPAddress%20%7B%0A%20%20return%20%28%27%5Bnet%3AmyIPAddress%5D%27%29%0A%7D%0A%0Ato%20wifiConnect%20ssid%20password%20fixedIP%20gatewayIP%20subnetIP%20%7B%0A%20%20if%20%28not%20%28%27%5Bnet%3AhasWiFi%5D%27%29%29%20%7Breturn%7D%0A%20%20%27%5Bnet%3AstopWiFi%5D%27%0A%20%20if%20%28%28pushArgCount%29%20%3C%205%29%20%7B%0A%20%20%20%20%27%5Bnet%3AstartWiFi%5D%27%20ssid%20password%0A%20%20%7D%20else%20%7B%0A%20%20%20%20%27%5Bnet%3AstartWiFi%5D%27%20ssid%20password%20false%20fixedIP%20gatewayIP%20subnetIP%0A%20%20%7D%0A%20%20local%20%27startMSecs%27%20%28millisOp%29%0A%20%20repeatUntil%20%28%28%27%5Bnet%3AmyIPAddress%5D%27%29%20%21%3D%20%270.0.0.0%27%29%20%7B%0A%20%20%20%20comment%20%27Timeout%20after%20N%20seconds%27%0A%20%20%20%20if%20%28%28%28millisOp%29%20-%20startMSecs%29%20%3E%2030000%29%20%7B%0A%20%20%20%20%20%20sayIt%20%27Could%20not%20connect%27%0A%20%20%20%20%20%20return%200%0A%20%20%20%20%7D%0A%20%20%20%20comment%20%27Slow%20blink%20while%20trying%20to%20connect%27%0A%20%20%20%20setUserLED%20true%0A%20%20%20%20waitMillis%20300%0A%20%20%20%20setUserLED%20false%0A%20%20%20%20waitMillis%20300%0A%20%20%7D%0A%20%20repeat%206%20%7B%0A%20%20%20%20comment%20%27Quick%20blinks%20when%20connected%27%0A%20%20%20%20setUserLED%20true%0A%20%20%20%20waitMillis%2050%0A%20%20%20%20setUserLED%20false%0A%20%20%20%20waitMillis%2050%0A%20%20%7D%0A%20%20sayIt%20%27My%20IP%20address%20is%3A%27%20%28%27%5Bnet%3AmyIPAddress%5D%27%29%0A%7D%0A%0Ato%20wifiCreateHotspot%20ssid%20password%20%7B%0A%20%20if%20%28not%20%28%27%5Bnet%3AhasWiFi%5D%27%29%29%20%7Breturn%7D%0A%20%20%27%5Bnet%3AstartWiFi%5D%27%20ssid%20password%20true%0A%20%20if%20%28%27Connected%27%20%21%3D%20%28%27%5Bnet%3AwifiStatus%5D%27%29%29%20%7B%0A%20%20%20%20sayIt%20%27Could%20not%20create%20hotspot%27%0A%20%20%20%20return%200%0A%20%20%7D%0A%20%20repeat%206%20%7B%0A%20%20%20%20comment%20%27Quick%20blinks%20when%20connected%27%0A%20%20%20%20setUserLED%20true%0A%20%20%20%20waitMillis%2050%0A%20%20%20%20setUserLED%20false%0A%20%20%20%20waitMillis%2050%0A%20%20%7D%0A%20%20sayIt%20%27My%20IP%20address%20is%3A%27%20%28%27%5Bnet%3AmyIPAddress%5D%27%29%0A%7D%0A%0A)

## wireless programming (BLE)

```python
import time
from microblocks_messaging_library import MicroblocksBLEMessage

m = MicroblocksBLEMessage()
# m.discover() # Discover MicroBlocks devices
m.connect('MicroBlocks KCY') # replace the string with the device name

# broadcast message from Python to MicroBlocks
m.sendBroadcast('happy')
time.sleep(1)
m.sendBroadcast('sad')

# receive broadcasts from MicroBlocks
while True:
    message = m.receiveBroadcasts()
    if message:
        print(message)
```

## serial

```python
import time
from microblocks_messaging_library import MicroblocksSerialMessage

m = MicroblocksSerialMessage()
m.connect('/dev/tty.usbmodem1402') # replace the string with micro:bit port

# broadcast message from Python to MicroBlocks
m.sendBroadcast('happy')
time.sleep(1)
m.sendBroadcast('sad')

# receive broadcasts from MicroBlocks
while True:
    message = m.receiveBroadcasts()
    if message:
        print(message)
```

Work with the MicroBlocks code (you can save this PNG file, then drag it into MicroBlocks to load the scripts):

![](./allScripts147900.png)

## message flow diagram
![](./MicroBlocks-Python-Communication.jpg)

## MicroBlocks interoperability
- [MicroBlocks and Snap! Communication with Messages](https://wiki.microblocks.fun/snap/microblocks_snap_messaging)
- [Microblocks Serial Protocol (version 2.09)](https://bitbucket.org/john_maloney/smallvm/src/master/misc/SERIAL_PROTOCOL.md)